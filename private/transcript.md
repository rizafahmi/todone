# Building Real-time Shop With Meteor

## Why Meteor?

Warning: This is very subjective and opinionated reason I come with.

"Meteor Will Kill Ruby On Rails!" Josh Owens, [differential.io](http://differential.io/blog/meteor-killin-rails)

Don't get me wrong. I didn't hate Ruby or Rails at all. To be honest, I admire RoR and it's creator (37signal isn't it?!). Rails has become de-facto standard of web framework. Everytime there is a new language (golang, erlang, elixir, java, etc), we usually looked for rails-inspired web framework. It's fast to start with, clean and readable language, and it's oppinionated framework. But when we talked about real-time web app, we must use another framework such as backbone, angular, etc. Or RoR will serve an API that will consumed by client-side framework.

### Perfect for Lean Startups

Easy to learn, build product fast, and quickly give us something to show.

### Meteor Is The Future

The entire web is moving toward thick client, reactive interfaces, and realtime APIs. Many leading tech company have developed internal frameworkds that share some of the same ideas.

Asana has [luna](https://asana.com/luna), Facebook has [react](http://facebook.github.io/react/) and AirBnb has [Rendr](https://github.com/airbnb/rendr)


"Less Is More" Mr. 335 Larry Carlton, Jazz Blues Guitarist.

Easy to learn, easy to maintain. Components is less: JavaScript, HTML and CSS. No need to learn Ruby, Python, PHP, etc.

"Ideally, you want to keep the time from idea to launch under 10 hours" Sacha Geif, Discover Meteor Author, Designer.

He talk about side project thing.

And more importantly, Meteor make programming fun again.

"Meteor is designed to be fun for developers." Matt DeBergalis Co-Founder Meteor.

And that's pretty true.Somehow in the last 10 years, it got incredibly hard to write these apps. Now you need to piece together a dozen technologies to have a modern application. And it stopped being fun somewhere along the way. Meteor is designed to be fun for developers. It's designed to be something that people can enjoy, that kindles a sense of curiosity and excitement.

## What is Meteor?

It’s not only framework, it’s a platform. Meteor have their own package manager called atmosphere. At the client side, Meteor has it’s own template engine called blaze. At the server side, it’s NodeJS. It’s fullstack JavaScript platform, perfect for building real-time web apps. It’s reactive and the database available everywhere.

![Meteor](Meteor.png)

Meteor uses JavaScript on both client and server side. And also able to share between them. Thanks to NodeJS.

## What We're Building

We will develop next generation todo list :) The project is simple enough to us to get to know how Meteor work.

## Fire Up The Meteor

### Installing Meteor

	$> curl https://install.meteor.com | /bin/sh

With this command, you’ll get everything you need. From Meteor CLI up to mongodb installed for you.

### Creating The App

	$> meteor create todone
	$> cd todone

### Running The App

	$> meteor

### Overview of the Code

Now let’s see the code generated by Meteor. 

![Helloworld](Helloworld.png)

First we look at the body. There is `{{> hello}}` that will load template called `hello` at the bottom. `hello` template by any chance could be in another file and Meteor still recognise it. 

`{{greeting}}` is variable that bind from javascipt file.


### Adding A Package

Meteor is not just a framework, it’s a platform to build real-time applications. To enrich our Meteor app, we need one or two third party packages. Meteor doesn’t have build-in package manager and we can’t use Node Package Manager (npm). Luckily, there is one node package to help us with this problem. It’s called Meteorite. To install Meteorite, you’ll need `npm` and if you already has NodeJS on your system.

Easy enough, just type `$> npm install -g meteorite`. Then we can add package to our app. Let's add twitter bootstrap package now: `$> mrt add bootstrap-3` and see the change in the browser.


### Coding Time

Remove the placeholder code in javascript file so it just become:

    if (Meteor.isClient) {
        // This code will execute on client

    }

    if (Meteor.isServer){
        // This code will execute on server

    }

[View on github](https://github.com/rizafahmi/todone/commit/6ba09307c537b9c34724fd0645fecdaacc0c128e)

Now let's add code that will execute on both, client and server.

    **Todones = Meteor.Collection('todones');**
    if (Meteor.isClient) {
        // This code will execute on client

    }

    if (Meteor.isServer){
        // This code will execute on server

    }
[View on Github](https://github.com/rizafahmi/todone/commit/e2489c1233081c5f6c9067776d72c7bf711db3f8)

Save the file and go to browser's console. With collection declaration we did before, now we able to access mongodb from our client. Let's try it now.

    > Todones.find().fetch()
    > Todones.find().count()
    > Todones.insert({title: "First Todo", isDone: false})
    > Todones.find().fetch()

Pretty cool, right? And not just that, if we open mongodb on the server we will see the item that we insert before. (Open up robomongo to show the data). And also we can input data in server (using robomongo) and the data will available on client also.

Now we add hello world using Handlebar-like templates.


    <head>
      <title>Todone</title>
    </head>

    <body>
      <div class="containers">
        {{> TodonePanel}}
      </div>
    </body>

    <template name="TodonePanel">
      Hello, JakartaJS
    </template>
[View on github](https://github.com/rizafahmi/todone/commit/b25c3046d79ac7e56053edff14ff956056a35ee3)

Then we add iteration items.


[code]
[View on Github]()

Right now, the template don't know anything about `items`. So we need to declare it on the `javascript file`.

[code]
[View on Github]()

Try to insert new data (from client and server) and see the power of reactivity! See, how easy it is to build real-time application using Meteor! With just a couples of lines we can make real-time app.

Revise our html little bit to show the title. Then we remove the bullet item so it looks like real todone app :)


